/* Email Content Sandbox Styles - Prevents email HTML from affecting dashboard */

.email-content-sandbox {
  /* Isolation */
  isolation: isolate;
  contain: layout style paint;
  
  /* Reset common properties that emails might override */
  font-family: inherit !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  color: #374151 !important;
  
  /* Prevent layout issues */
  max-width: 100% !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  
  /* Prevent emails from breaking out of container */
  position: relative !important;
  z-index: 1 !important;
}

/* Reset styles for common email elements */
.email-content-sandbox * {
  /* Prevent emails from overriding critical dashboard styles */
  position: relative !important;
  z-index: auto !important;
  
  /* Reset dangerous properties */
  position: static !important;
  top: auto !important;
  left: auto !important;
  right: auto !important;
  bottom: auto !important;
  transform: none !important;
  
  /* Prevent viewport manipulation */
  width: auto !important;
  height: auto !important;
  min-width: 0 !important;
  min-height: 0 !important;
  max-width: 100% !important;
  
  /* Reset margins and padding to prevent layout issues */
  margin: 0 !important;
  padding: 0 !important;
}

/* Allow some basic styling for readability */
.email-content-sandbox p {
  margin-bottom: 1rem !important;
  padding: 0 !important;
}

.email-content-sandbox h1,
.email-content-sandbox h2,
.email-content-sandbox h3,
.email-content-sandbox h4,
.email-content-sandbox h5,
.email-content-sandbox h6 {
  margin: 1rem 0 0.5rem 0 !important;
  padding: 0 !important;
  font-weight: 600 !important;
}

.email-content-sandbox ul,
.email-content-sandbox ol {
  margin: 1rem 0 !important;
  padding-left: 1.5rem !important;
}

.email-content-sandbox li {
  margin: 0.25rem 0 !important;
  padding: 0 !important;
}

.email-content-sandbox a {
  color: #3b82f6 !important;
  text-decoration: underline !important;
}

.email-content-sandbox img {
  max-width: 100% !important;
  height: auto !important;
  display: block !important;
  margin: 1rem 0 !important;
}

.email-content-sandbox table {
  width: 100% !important;
  max-width: 100% !important;
  border-collapse: collapse !important;
  margin: 1rem 0 !important;
}

.email-content-sandbox td,
.email-content-sandbox th {
  padding: 0.5rem !important;
  border: 1px solid #e5e7eb !important;
  text-align: left !important;
  vertical-align: top !important;
}

/* Prevent emails from using fixed positioning or other dangerous CSS */
.email-content-sandbox *[style*="position: fixed"],
.email-content-sandbox *[style*="position: absolute"],
.email-content-sandbox *[style*="z-index"] {
  position: static !important;
  z-index: auto !important;
}

/* Prevent emails from overriding body or html styles */
.email-content-sandbox *[style*="body"],
.email-content-sandbox *[style*="html"] {
  /* Neutralize any attempts to style body/html */
  all: unset !important;
}

/* Block dangerous CSS properties */
.email-content-sandbox * {
  /* Prevent viewport manipulation */
  viewport: none !important;
  
  /* Prevent animation overrides */
  animation: none !important;
  transition: none !important;
  
  /* Prevent filter effects that might affect parent elements */
  filter: none !important;
  backdrop-filter: none !important;
  
  /* Prevent blend modes that might affect parent elements */
  mix-blend-mode: normal !important;
  background-blend-mode: normal !important;
}

/* Ensure text remains readable */
.email-content-sandbox {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif !important;
}

/* Prevent emails from hiding content */
.email-content-sandbox * {
  visibility: visible !important;
  opacity: 1 !important;
  display: block !important;
}

.email-content-sandbox span,
.email-content-sandbox a,
.email-content-sandbox strong,
.email-content-sandbox em,
.email-content-sandbox b,
.email-content-sandbox i {
  display: inline !important;
}

.email-content-sandbox br {
  display: inline !important;
}

/* Prevent emails from affecting scrolling */
.email-content-sandbox * {
  overflow: visible !important;
  overflow-x: visible !important;
  overflow-y: visible !important;
}
